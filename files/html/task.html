<html>
<head>
    <meta charset="UTF-8">
    <title>Подготовка к ЕГЭ по Информатике</title>
    <link rel="stylesheet" href="/api/files/styles/general.css">
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">


    <script>
        function displaytask(apiUrl) {
            fetch(apiUrl)
            .then(response => {
                if (!response.ok) {
                throw new Error('Network response was not ok');
                }
                return response.json();
            })
            .then(data => {

                var tsk = data[0];
                console.log(tsk);
                var cont = document.getElementById("content");

                var header = document.getElementById("name");
                header.innerHTML = `задача #${tsk["id"]} (тип ${tsk["type"]})`;

                fetch(`/api/files/content/${tsk.text}`)
                .then((res) => res.text())
                .then((html) => {

                    console.log(html);

                    cont.innerHTML = html;
                })
                .catch((e) => console.error(e));
            })
            .catch(error => {
                console.error('Error:', error);
            });
        }

    </script>

    <script src="/api/files/html/drawusername.js"></script>
</head>
<body>
    <script>
        displaytask("/api/get/Tasks?id={{.Taskid}}");

    </script>

    <div class="section">
        <div id="userdata"></div>
    </div>

    <div class="section" id="header">
        <a href="/tasks">назад</a>
        <h2 id="name"></h2>
    </div>

    <div class="section">
        <div id="content">

        </div>

        <form action="/tasks/{{.Taskid}}" method="post">
            <input type="text" name="ans" id="ans"> <label for="ans">введите ответ</label>
            <br>

            <button type="submit">отправить</button>
        </form>
    </div>

</body>
</html>
